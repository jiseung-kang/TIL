# 모듈

## 모듈의 일반적 의미

- 애플리케이션을 구성하는 개별적 요소
- 재사용 가능한 코드 조각

모듈은 기능을 기준으로 **파일 단위**로 분리한다.

모듈은 자신만의 파일 스코프(모듈 스코프)를 가져야 한다.

파일 스코프를 갖는 모듈의 자산은 기본적으로 비공개 상태, 캡슐화 되어 있어 애플리케이션과 분리되어 개별적으로 존재한다.

하지만 완전히 분리된 경우 재사용이 불가능하므로, 공개가 필요한 자산에 한정해 명시적으로 선택적 공개(export)가 가능하다.

> 모듈 사용자는 모듈이 공개한 자산 중 일부/전체를 자신의 스코프로 불러들여(import) 재사용할 수 있다.

## 자바스크립트와 모듈

자바스크립트는 파일마다 독립적인 파일 스코프를 갖지 않는다.

여기서 CommonJS, AMD가 제안되었고, 브라우저 환경에서 모듈을 사용하기 위해 모듈 로더 라이브러리를 사용해야 하게 되었다.

Node.js는 CommonJS(모듈 시스템의 사실상 표준)를 채택해 기본적으로 CommonJS 사양을 따른다.

Node.js는 ECMAScript 표준 사양은 아니지만 모듈 시스템을 지원해 파일별 독립적인 파일 스코프(모듈 스코프)를 갖는다.

## ES6 모듈(ESM)

ES6는 클라이언트 사이드 자바스크립트에서 동작하는 모듈 기능을 추가했다.

대부분의 브라우저에서 ES6 모듈을 사용할 수 있으며, script 태그에 type=”module” 어트리뷰트를 추가해서 사용할 수 있다.

ESM은 기본적으로 strict mode가 적용된다.

> ESM임을 명확하게 하기 위해 파일 확장자로 mjs를 사용할 것을 권장한다.

- 모듈 스코프
  - 파일 자체의 독자적인 모듈 스코프를 제공하며
  - 모듈 외부에서 참조할 수 없다.
- export 키워드
  - 모듈은 독자적인 모듈 스코프를 갖는다.
  - export 키워드로 외부에 공개해 다른 모듈들이 재사용하게 할 수 있다.
- import 키워드
  - 다른 모듈에서 공개한 식별자를 자신의 모듈 스코프 내부로 로드할 때 사용한다.
  - ESM의 경우 파일 확장자를 생략할 수 없다.
  - import문에 의해 로드되는 의존성은 script 태그로 로드하지 않아도 된다.
  - 식별자는 as 뒤의 이름의 객체에 프로퍼티로 할당할 수 있다.
  - 모듈에서 하나의 값만 export할 때는 default를 사용할 수 있다. 이 경우 var, let, const 키워드는 사용할 수 없다.
  - 이 경우 {} 없이 임의의 이름으로 import 할 수 있다.
