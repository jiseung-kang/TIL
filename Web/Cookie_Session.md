# 쿠키와 세션

> HTTP 프로토콜의 비연결성, 무상태 특성을 보완하기 위해 쿠키와 세션을 사용해야 한다.

## 쿠키

- 웹 브라우저(클라이언트)에서 관리되는 기록 정보 파일
- 사용자 인증 **유효 시간**을 설정할 수 있고 유효 시간이 정해진다면 브라우저가 종료되어도 쿠키가 유지된다.
- 구성요소 : 이름(KEY), 값(VALUE), 유효시간(유지), 도메인, 경로

### 쿠키 동작 원리

1. 클라이언트가 서버에게 로그인 요청
2. 요청받은 서버가 쿠키를 생성해서 **HTTP 헤더**에 쿠키를 포함해 클라이언트로 전달
3. 유효시간 동안 클라이언트는 쿠키를 가지고 있음
4. 유효시간 동안에 클라이언트가 서버에게 가지고 있는 쿠키를 HTTP 헤더에 쿠키를 포함해 요청
5. 포함된 쿠키로 서버와 클라이언트 간 사용자 인증 진행

> HTTP 요청을 탈취 당할 경우 쿠키도 같이 탈취되어 사용자 정보 유출 가능성이 있다. 그래서 쿠키는 주로 **장바구니 및 자동 로그인**에 사용된다.

## 세션

- 세션은 쿠키를 기반으로 하지만 사용자 정보를 클라이언트에 저장하는 쿠키와 다르게 **서버에 저장**하여 관리
- 서버에서는 클라이언트를 구별하기 위해 각각 **세션 ID**를 부여하며 클라이언트가 종료되기 전까지 유지
- **접속 시간에 제한**두어 강제로 세션을 끊을 수 있음
- 서버에 저장하기 때문에 **보안성**이 높음

### 세션 동작 원리

1. 클라이언트가 서버에 요청
2. 서버에서 클라이언트에게 고유한 **세션 ID**를 부여하고 세션 저장소에 쿠키를 사용하여 저장하여 클라이언트에게 발급
3. 앞으로 서버는 클라이언트와 요청 시 쿠키에 담겨있는 세션ID와 서버측 저장소에 있는 세션정보를 비교

> 사용자가 많아질수록 서버에서 저장하고 관리하기 때문에 서버 메모리를 많이 차지하고 부하가 생기게 되어 속도나 성능의 저하가 생길 수 있음
