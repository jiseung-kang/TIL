# SRP: 단일 책임 원칙

> 콘웨이 법칙에 따른 따름 정리 : 소프트웨어 시스템이 가질 수 있는 최적의 구조는 시스템을 만드는 조직의 사회적 구조에 커다란 영향을 받는다. 각 소프트웨어 모듈은 변경의 이유가 단 하나여야 한다.

- 모든 모듈이 단 하나의 일만 해야 한다. X
  - 단 하나의 일만 해야 한다는 함수의 원칙
    - 커다란 함수를 작은 함수들로 리팩터링하는 저수준에서 사용된다.
    - 이는 SOLID도 아니고 SRP도 아니다.
      - SRP : 단일 모듈은 변경의 이유가 하나뿐이다.
- 하나의 모듈은 하나의 사용자, 이해관계자에 대해서만 책임져야 한다. O
  - 사용자, 이해관계자 ⇒ Actor로 이해하자.
  - 하나의 모듈은 하나의 Actor에 대해서만 책임져야 한다.
    - 모듈 : 소스 파일. 함수와 데이터 구조로 구성된 응딥된(SRP) 집합
    - 응집성 : 단일 Actor를 책임지는 코드를 함께 묶어주는 힘

## 징후 1: 우발적 중복

단일 클래스에 여러 Actor가 결합되는 경우.

이 경우 Actor의 Acting이 의존하는 무언가에 영향을 줄 수 있다.

서로 다른 Actor가 의존하는 코드를 너무 가까이 배치했기 때문에 발생한다.

SRP는 서로 다른 Actor가 의존하는 코드를 서로 분리하라고 말한다.

## 징후 2: 병합

메서드가 서로 다른 Actor를 책임진다면 병합이 발생할 가능성이 높다.

변경사항이 서로 충돌하며 병합이 발생한다.

## 해결책

서로 다른 Actor를 뒷받침하는 코드를 분리하기

⇒ 메서드를 각기 다른 클래스로 이동시키자.

- 가장 확실한 해결책은 데이터와 메서드를 분리하는 방식
  - 각 클래스를 인스턴스화하고 추적해야 한다.
    - ⇒ Facade 패턴 : 각 클래스의 객체를 생성하고 요청된 메서드를 가지는 객체로 위임
- 중요한 업무 규칙을 데이터와 가깝게 배치하는 방식
  - private을 활용해 유효범위를 제한하자

## 결론

단일 책임 원칙은 메서드와 클래스 수준의 원칙

컴포넌트 수준에서는 공통 폐쇄 원칙이 된다.

아키텍처 수준에서는 아키텍처 경계의 생성을 책임지는 변경의 축이 된다.
