# 컴포넌트 응집도

> 어떤 클래스를 어떤 컴포넌트에 포함시켜야 할까?

## REP: 재사용/릴리스 등가원칙

> 재사용 단위는 릴리스 단위와 같다.

- 릴리스 절차 : 추적 관리
- 릴리스 번호 : 재사용 컴포넌트들이 서로 호환되는지 보증
- 릴리스 문서 : 새로운 버전이 언제 출시되고 무엇이 변했는지

단일 컴포넌트는 응집성 높은 클래스와 모듈들로 구성되어야 한다.

모든 모듈은 서로 공유하는 중요한 테마나 목적이 있어야 한다.

하나의 컴포넌트로 묶인 크래스와 모듈은 반드시 함께 릴리스할 수 있어야 하며, 하나의 컴포넌트로 묶인 클래스와 모듈은 버전 번호가 같고 동일한 릴리스로 추적 관리되며 동일한 릴리스 문서에 포함되어야 한다.

## CCP: 공통 폐쇄 원칙

> 동일한 이유로 동일한 시점에 변경되는 클래스를 같은 컴포넌트로 묶어라.
> 서로 다른 시점에 다른 이유로 변경되는 클래스는 다른 컴포넌트로 분리하라.

- SRP(단일 책임 원칙)의 컴포넌트 관점
  - 단일 컴포넌트는 변경의 이유가 하나
  - 유지보수성 > 재사용성
  - 변경이 여러 컴포넌트에 분산되어 발생하기보다 변경 모두가 단일 컴포넌트에서 발생하는 편이 낫다.
  - 변경을 단일 컴포넌트로 제한하면 해당 컴포넌트만 재배포하면 된다.
- OCP(개방 폐쇄 원칙)
  - 변경될 가능성이 있는 클래스는 모두 한곳으로 묶어라.
  - 물리적, 개념적으로 강하게 결합되어 항상 함께 변경되는 클래스는 하나의 컴포넌트에 속해야 한다.
  - 이를 통해 소프트웨어를 릴리스, 재검증, 배포하는 일과 관련된 작업량을 최소화할 수 있다.
  - 클래스는 변경에는 닫혀있고 확장에는 연려있어야 하는데 이를 전략적으로 해야 한다.
  - 공통 변경에 대해 클래스가 닫혀 있도록 설계한다.
  - 동일한 유형의 변경에 대해 닫혀 있는 클래스들을 하나의 컴포넌트로 묶는다.

## CRP: 공통 재사용 원칙

> 컴포넌트 사용자들을 필요하지 않는 것에 의존하게 강요하지 말라.

클래스와 모듈을 어느 컴포넌트에 위치시킬 것인가? 재사용 경향이 있는 클래스와 모듈들을 같은 컴포넌트에 포함하라.

- 컨테이너 클래스와 해당 클래스의 이터레이터 클래스
  - 강한 결합. 함께 재사용 ⇒ 반드시 동일한 컴포넌트에 위치
  - 어떤 컴포넌트가 다른 컴포넌트를 사용한다 ⇒ 의존성
  - 의존하는 컴포넌트가 있다면 확실히 인지하자.
  - 강하게 결합되지 않은 클래스를 동일한 컴포넌트에 위치시키면 안된다.
- ISP의 포괄적인 버전
  - 필요하지 않은 것에 의존하지 말라

## 컴포넌트 응집도에 대한 균형 다이어그램

REP와 CCP는 포함 원칙. 컴포넌트를 더 크게 만든다.

CRP는 배제 원칙. 컴포넌트를 더 작게 만든다.

REP, CRP에 중점 ⇒ 사소한 변경이 너무 많은 컴포넌트에 영향

CCP, REP ⇒ 불필요한 릴리스가 빈번

- 프로젝트 초기
  - CCP > REP
  - 개발 가능성 > 재사용성
- 프로젝트가 성숙하면 삼각형이 오른쪽에서 왼쪽으로 이동한다.

## 결론

> 재사용성과 개발 가능성의 상충하는 힘을 고려하자
> 시간의 흐름에 따라 프로젝트의 초점은 개발 가능성 ⇒ 재사용성
