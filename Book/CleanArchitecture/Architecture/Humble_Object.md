# 프레젠터와 험블 객체

> 프레젠터는 험블 객체 패턴을 따른 형태로
> 아키텍처 경계를 식별하고 보호하는 데 도움이 된다.
> 클린 아키텍처는 험블 객체 구현체들로 가득 차 있다.

### 험블 객체 패턴

- 디자인 패턴
- 테스트하기 어려운 행위, 쉬운 행위를 단위 테스트 작성자가 분리하기 쉽게 하는 방법

1. 행위들을 두 개의 모듈/클래스로 나눈다.
   1. 이 모듈 하나가 험블
2. 가장 기본적인 본질은 남기고 테스트하기 어려운 행위들을 험블 객체로 옮긴다.
3. 나머지 모듈에는 험블 객체에 속하지 ㅇ낳은 테스트하기 쉬운 행위들을 옮긴다.

⇒ 험블 객체를 사용하면 두 행위를 분리해 Presenter와 View를 분리할 수 있다.

### 프레젠터와 뷰

- 뷰는 험블 객체이고 테스트하기 어렵다.
  - 이 객체에 포함된 코드는 가능한 한 간단하게 유지한다.
  - 뷰는 데이터를 GUI로 이동시키지만 데이터를 직접 처리하지 않는다.
- 프레젠터는 테스트하기 쉬운 객체다.
  - 프레젠터의 역할은 애플리케이션으로부터 데이터를 받아 화면에 표현할 수 있는 포맷으로 만드는 것
  - 뷰는 데이터를 화면으로 전달하는 간단한 일만 처리
  - 뷰는 데이터를 화면으로 로드할 뿐이며 역할이 없다. 보잘 것 없다.(humble)

### 테스트와 아키텍처

테스트 용이성은 좋은 아키텍처가 지녀야 할 속성

험블 객체 패턴은 그 중 하나. 아키텍처의 경계를 정의한다.

### 데이터베이스 게이트웨이

- 유스케이스 인터랙터와 데이터베이스 사이에 존재
  - 다형적 인터페이스
  - 애플리케이션이 데이터베이스에 수행하는 모든 메서드를 포함
  - 유스케이스 계층은 SQL을 허용하지 않는다.
  - 유스케이스 계층은 게이트웨이 인터페이스를 호출한다.
- 인터페이스 구현체는 데이터베이스 계층에 위치한다.
  - 이 구현체는 험블 객체
  - 인터랙터는 험블 객체가 아니다. 테스트하기 쉬우며 게이트웨이는 스텁이나 테스트 더블로 적당히 교체 가능

### 데이터 매퍼

객체 관계 매퍼는 사실 존재하지 않는다.

객체는 데이터 구조가 아니기 때문

데이터 매퍼라고 하자. RDBMS로부터 가져온 데이터를 데이터 구조에 담아주니까

ORM은 게이트웨이 인터페이스와 데이터베이스 사이에서 일종의 또 다른 험블 객체 경계를 형성한다.

### 서비스 리스너

애플리케이션은 데이터를 간단한 데이터 구조 형태로 로드한다.

데이터 구조를 경계를 가로질러 특정 모듈로 전달한다.

해당 모듈은 데이터를 적절한 포맷으로 만들어 외부 서비스로 전송

외부로부터 데이터를 수신하는 서비스의 경우 서비스 리스너가 서비스 인터페이스로부터 데이터를 수신하고 데이터를 간단한 데이터 구조로 포맷을 변경한다.

### 결론

각 아키텍처 경계마다 경계 가까이 숨어있는 험블 객체 패턴

경계를 넘나드는 통신은 거의 모두 간단한 데이터 구조를 수반

대개 그 경계는 테스트하기 어려운 무언가와 테스트하기 쉬운 무언가

이 경계에서 험블 객체 패턴을 사용하면 전체 시스템의 테스트 용이성을 크게 높일 수 있다.
