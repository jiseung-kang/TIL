# 규칙들

## 정책과 수준

소프트웨어 시스템 : 정책을 기술한 것

정책 : 여러개의 작은 정책

소프트웨어 아키텍처는 정책들을 신중하게 분리하고 재편성한다.

그래프 정점은 동일한 수준의 정책을 포함하는 컴포넌트에 해당

방향이 있는 간선은 컴포넌트 사이의 의존성

간선은 다른 수준에 위치한 컴포넌트를 서로 연결한다.

의존성은 소스 코드, 컴파일 타임의 의존성

좋은 아키텍처 : 의존성 방향이 컴포넌트 수준 기반. 저수준 → 고수준

### 수준

수준 : 입력과 출력의 거리

소스 코드 의존성 : 수준에 따라 결합. 데이터 흐름 기준이 아니다.

### 결론

단일 책임 원칙, 개방 폐쇄 원칙, 공통 폐쇄 원칙, 의존성 역전 원칙, 안정된 의존성 원칙, 안정된 추상화 원칙 모두를 포함

## 업무 규칙

업무 규칙 : 사업적 수익을 얻고 비용을 줄이는 규칙, 절차

핵심 업무 규칙은 핵심 업무 데이터를 필요로 하며, 이는 결합되어 객체의 후보가 된다.

### 엔티티

엔티티 : 컴퓨터 시스템 내부의 객체, 핵심 업무 데이터를 기반으로 동작하는 일련의 조그만 핵심 업무 규칙을 구체화

엔티티의 인터페이스 : 핵심 업무 데이터를 기반으로 동작하는 핵심 업무 규칙을 구현한 함수들

### 유스케이스

모든 업무 규칙이 엔티티처럼 순수하지 않다.

유스케이스 : 자동화된 시스템이 사용되는 방법. 애플리케이션에 특화된 업무 규칙

유스케이스는 사용자 인터페이스를 기술하지 않는다.

유스케이스는 객체

- 업무 규칙을 구현하는 하나 이상의 함수를 제공한다.
- 엔티티는 유스케이스에 대해 모른다.
- 유스케이스는 엔티티를 안다.
- 유스케이스는 단일 애플리케이션에 특화된 저수준
- 엔티티는 수많은 애플리케이션에서 사용될 수 있도록 일반화된 고수준

### 요청 및 응답 모델

유스케이스는 입력 데이터를 받아 출력 데이터를 생성한다.

제대로된 유스케이스 객체는 데이터를 구조 받는 방식을 모른다.

데이터 구조는 어떤 것에도 의존하지 않는다. 웹에 대해서도 모른다.

의존성을 제거하라

- 요청 및 응답 모델이 독립적
- 엔티티 객체를 가리키는 참조를 요청 및 응답 데이터 구조에서 분리
- 단일 책임 원칙

### 결론

업무 규칙은 소프트웨어 시스템이 존재하는 이유

업무 규칙은 사용자 인터페이스나 데이터베이스 등의 저수준 관심사로 인해 오염되어서는 안된다.

덜 중요한 것은 플러그인

업무 규칙은 가장 독립적이고 가장 많이 재사용할 수 있는 코드